extends /layout/forms

block beforehtml
  -
    title = 'ChatGPT 問與答'
    description = '讓你在 LINE 中模擬 ChatGPT 的問答畫面！上面有開啟自訂連結及再次分享的按鈕。'

block meta
  meta(property="og:image:height", content="640")
  meta(property="og:image:width", content="1280")
  meta(property="og:image", content="https://i.imgur.com/0uU5aCG.png")
  meta(property="og:url", content=baseurl+"forms/chatgpt-1.html")

block form
  .form-group.my-2
    label(for="vcard-design") 風格
    select#vcard-design.form-control.form-control-sm(v-model="vcard.design")
      option(value="") ChatGPT 3
      option(value="gpt4") ChatGPT 4
    small.form-text.text-muted 請選擇風格，預設為 #[code ChatGPT 3]。
  .form-group.was-validated.my-2
    label(for="vcard-altText") 替代文字
    input#vcard-altText.form-control.form-control-sm(type="text", required, pattern=".+", v-model="vcard.altText")
    small.form-text.text-muted 請填寫在訊息無法顯示時（如：系統通知）的替代文字。
  .form-group.was-validated.my-2
    label(for="vcard-avatar") 大頭貼
    input#vcard-avatar.form-control.form-control-sm(type="url", inputmode="url", required, pattern="https://\\S+", v-model.trim="vcard.avatar")
    small.form-text.text-muted 請填寫大頭貼圖片網址，必須是 #[code https://] 開頭，長寬比為 #[code 1:1]。
  .form-group.was-validated.my-2
    label(for="vcard-link") 連結
    input#vcard-link.form-control.form-control-sm(type="url", inputmode="url", required, pattern="(https?://|line://|tel:|mailto:)\\S+", v-model.trim="vcard.link")
    small.form-text.text-muted 請填寫連結。你可以使用 #[a(target="_blank", href="https://ga-dev-tools.appspot.com/campaign-url-builder/") UTM Builder] 以及 #[code &amp;openExternalBrowser=1] 另開瀏覽器。
  .form-group.was-validated.my-2
    label(for="vcard-prompt") 提示文字
    textarea#vcard-prompt.form-control.form-control-sm(required, rows="5", pattern=".+", v-model="vcard.prompt")
    small.form-text.text-muted 請填寫提示文字，文字過多可能會導致分享失敗。
  .form-group.was-validated.my-2
    label(for="vcard-answer") 回答文字
    textarea#vcard-answer.form-control.form-control-sm(required, rows="5", pattern=".+", v-model="vcard.answer")
    small.form-text.text-muted 請填寫回答文字，文字過多可能會導致分享失敗。

block vue-config
  script.
    const cfg = window.vueConfig
    _.set(cfg, 'data.vcard', {
      altText: '喝酒對於大腦皮質細胞的傷害是不可逆的?',
      answer: '✔ 長期大量飲酒與大腦結構性改變（萎縮 / 神經退行）有強烈關聯。 一些變化是 神經細胞死亡或結構性損傷層面，對功能有長期影響。酒精導致的真正細胞死亡 ≠ 自然再生，通常是不可逆的。',
      avatar: 'https://i.imgur.com/1KZoSue.png',
      design: '',
      link: 'https://david888.com/',
      prompt: '喝酒對於大腦皮質細胞的傷害是不可逆的?',
      template: '#{baseurl}cards/chatgpt-1.txt',
    })
    cfg.computed = {
      ...cfg.computed,
      shortcut () {
        const params = window.httpBuildQuery({
          template: window.encodeBase64url(this.vcard.template),
          json5gzip: window.encodeGzip(JSON5.stringify(window.beautifyFlex(_.omit(this.vcard, ['template'])))),
        })
        if (!_.isString(params) || !params.length) return
        return `https://liff.line.me/#{liffidFull}/share-json5gzip.html?${params}`
      },
    }
